# Todoist Integration

## Available MCP Tools

### Reading Tasks
- `get-overview` — all projects with hierarchy
- `find-tasks` — search by text, project, section
- `find-tasks-by-date` — tasks by date range

### Writing Tasks
- `add-tasks` — create new tasks
- `complete-tasks` — mark as done
- `update-tasks` — modify existing

---

## Pre-Creation Checklist

### 1. Check Workload (REQUIRED)

```
find-tasks-by-date:
  startDate: "today"
  daysCount: 7
  limit: 50
```

Build workload map:
```
Пн: 3 задачи
Вт: 5 задач  ← много
Ср: 2 задачи
Чт: 4 задачи
Пт: 6 задач  ← перегрузка
Сб: 1 задача
Вс: 0 задач
```

### 2. Check Duplicates (REQUIRED)

```
find-tasks:
  searchText: "ключевые слова из новой задачи"
```

If similar exists → mark as duplicate, don't create.

---

## Projects Structure

| Проект | Описание |
|--------|----------|
| **Работа** | Основная работа: объекты, ПТО, ИД |
| **Подработка** | Сторонние проекты за деньги |
| **Телеграм-канал** | Контент, посты, продвижение |
| **Мои проекты** | Автоматизация, программа ПТО, ассистенты |
| **Обучение** | Курсы, книги, навыки |
| **Личное** | Семья, здоровье, финансы |

---

## Priority by Domain

Based on user's work context (see [ABOUT.md](ABOUT.md)):

| Domain | Default Priority | Override |
|--------|-----------------|----------|
| Работа (срочно) | p1 | — |
| Работа (обычно) | p2 | — |
| Подработка | p2-p3 | — |
| Телеграм-канал (с дедлайном) | p3 | — |
| Телеграм-канал (идеи) | p4 | — |
| Мои проекты | p3 | — |
| Обучение | p4 | — |
| Личное | p3-p4 | — |

### Priority Keywords

| Keywords in text | Priority |
|-----------------|----------|
| срочно, критично | p1 |
| важно, приоритет, до конца недели | p2 |
| нужно, надо, не забыть | p3 |
| стратегическая задача | p4 |

### Apply Decision Filters for Priority Boost

If entry matches 2+ filters → boost priority by 1 level:
- Сколько времени займёт и как встроить в график?
- Можно ли это автоматизировать?
- Это приближает к финансовой безопасности (500 т.р./мес)?
- Это помогает стать признанным экспертом в отрасли?

---

## Date Mapping

| Context | dueString |
|---------|-----------|
| **Срочно / критично** | today |
| **Конкретная дата** | exact date (January 15) |
| **До пятницы** | friday |
| **На этой неделе** | friday |
| **На следующей неделе** | next monday |
| **Не указано (работа)** | in 3 days |
| **Не указано (проекты)** | in 7 days |

### Russian → dueString

| Russian | dueString |
|---------|-----------|
| сегодня | today |
| завтра | tomorrow |
| послезавтра | in 2 days |
| до пятницы | friday |
| к 15 января | January 15 |
| на этой неделе | friday |
| на следующей неделе | next monday |
| через неделю | in 7 days |
| в понедельник | monday |

---

## Task Creation

```
add-tasks:
  tasks:
    - content: "Task title"
      dueString: "friday"  # MANDATORY
      priority: "p3"       # based on domain
      projectId: "..."     # if known
```

### Task Title Style

User prefers: прямота, ясность, конкретика

✅ Good:
- "ПИР Березовая 15 НВ — Оформить АОСР"
- "Внуково НК — Составить АОСР"
- "Школа Мячковский б-р 21 НВ — Откорректировать проект и согласовать в УТК"
- "Подойти к Синельникову по поводу Щукинской"
- "Написать пост в ТГ-канал про автоматизацию ИД"
- "Слепая печать — 20 минут тренировки"

❌ Bad:
- "Подумать о проекте"
- "Что-то с документами"
- "Разобраться с объектом"
- "Поработать над каналом"

### Workload Balancing

Комфортный максимум: 5+ задач в день (включая контрольные)

If target day has 7+ tasks:
1. Find next day with fewer tasks
2. Use that day instead
3. Mention in report: "сдвинуто на {day} (перегрузка)"

---

## Project Detection

| Keywords | Project |
|----------|---------|
| объект, АОСР, КС, ИД, проект, смета, заказчик, УТК, согласовать | Работа |
| имена объектов (Зюзино, Березовая, Внуково, Школа...) | Работа |
| имена коллег (Кантемир, Рамиль, Хачатур...) | Работа |
| имена заказчиков (Синельников, Баранов...) | Работа |
| подработка, заказ, клиент (сторонний), фриланс | Подработка |
| пост, канал, Лебовски, подписчики, контент, курс | Телеграм-канал |
| скрипт, автоматизация, программа ПТО, ассистент, таблица | Мои проекты |
| курс, книга, учить, слепая печать, навык | Обучение |
| здоровье, спина, долг, кредит, свадьба, Артём, семья | Личное |

If unclear → use Inbox (no projectId).

---

## Recurring Tasks

| Task | Schedule |
|------|----------|
| Подать выполнение по объектам | TBD (разобрать подробнее) |
| Упражнения для спины | every day |
| Слепая печать — тренировка | every day |
| Написать пост в ТГ-канал | every week |

---

## Colleagues & Clients (for context)

### Коллеги
Кантемир Купов, Кристина Жулидова, Дарья Кузнецова, Рамиль Абдурахманов, Хачатур Жужуков, Александр Смуров, Александр Масаковский, Алексей Адаменко, Роман Ляшок, Андрей Меджидов, Антон Басков, Никита Юрченко, Ярослав Овчаров (генеральный), Анастасия Тумашова, Евгения Казгунова

### Заказчики
Синельников Олег Александрович, Баранов Владимир Сергеевич, Ченчиков Валерий Николаевич, Дарбинян Павел Аветикович, Смагин Денис Вадимович, Хворостяной Андрей Сергеевич, Дмитриев Дмитрий Николаевич, Архипов Роман Евгеньевич, Гавриш Максим Андреевич, Елисеев Владимир Александрович, Анненков Станислав Александрович, Бурцев Игорь Олегович, Фролов Глеб Алексеевич, Полькин Константин Владимирович, Гуртовой Андрей Николаевич, Туник Александр Александрович, Ильчук Борис Николаевич, Ильичев Евгений Александрович

---

## Anti-Patterns (НЕ СОЗДАВАТЬ)

Based on user preferences:

- ❌ "Подумать о..." → конкретизируй действие
- ❌ "Разобраться с..." → что именно сделать?
- ❌ Абстрактные задачи без конкретного действия
- ❌ Дубликаты существующих задач
- ❌ Задачи без дат
- ❌ Задачи без привязки к объекту/проекту (если это работа)

---

## Error Handling

CRITICAL: Никогда не предлагай "добавить вручную".

If `add-tasks` fails:
1. Include EXACT error message in report
2. Continue with next entry
3. Don't mark as processed
4. User will see error and can debug

WRONG output:
  "Не удалось добавить (MCP недоступен). Добавь вручную: Task title"

CORRECT output:
  "Ошибка создания задачи: [exact error from MCP tool]"

---

*Обновлено: 9 января 2026*